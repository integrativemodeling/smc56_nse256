import ihm
try:
    import ihm.reference
except ImportError:
    pass
import os

# If we're running from an SGE job, override the from_pubmed_id() and
# from_accession() functions to return cached values, since we don't have
# network access (needed to query PubMed or UniProt directly)

def mock_from_pubmed(cls, pubmed_id):
    return ihm.Citation(
            pmid=33941673,
            title='Integrative analysis reveals unique structural and '
                  'functional features of the Smc5/6 complex.',
            journal='Proc Natl Acad Sci U S A', volume=118,
            year=2021, doi='10.1073/pnas.2026844118', authors=[
                'Yu Y', 'Li S', 'Ser Z', 'Sanyal T', 'Choi K', 'Wan B',
                'Kuang H', 'Sali A', 'Kentsis A', 'Patel DJ', 'Zhao X'])

# Auto-generated by util/get_accession_map.py
accession_map = {
    'Q08204': {'db_code':'SMC5_YEAST', 'sequence':
        'MTSLIDLGRYVERTHHGEDTEPRSKRVKIAKPDLSSFQPGSIIKIRLQDFVTYTLTEFNLSPSLNM'
        'IIGPNGSGKSTFVCAVCLGLAGKPEYIGRSKKVEDFIKNGQDVSKIEITLKNSPNVTDIEYIDARD'
        'ETIKITRIITRSKRRSDYLINDYQVSESVVKTLVAQLNIQLDNLCQFLSQERVEEFARLKSVKLLV'
        'ETIRSIDASLLDVLDELRELQGNEQSLQKDLDFKKAKIVHLRQESDKLRKSVESLRDFQNKKGEIE'
        'LHSQLLPYVKVKDHKEKLNIYKEEYERAKANLRAILKDKKPFANTKKTLENQVEELTEKCSLKTDE'
        'FLKAKEKINEIFEKLNTIRDEVIKKKNQNEYYRGRTKKLQATIISTKEDFLRSQEILAQTHLPEKS'
        'VFEDIDIKRKEIINKEGEIRDLISEIDAKANAINHEMRSIQRQAESKTKSLTTTDKIGILNQDQDL'
        'KEVRDAVLMVREHPEMKDKILEPPIMTVSAINAQFAAYLAQCVDYNTSKALTVVDSDSYKLFANPI'
        'LDKFKVNLRELSSADTTPPVPAETVRDLGFEGYLSDFITGDKRVMKMLCQTSKIHTIPVSRRELTP'
        'AQIKKLITPRPNGKILFKRIIHGNRLVDIKQSAYGSKQVFPTDVSIKQTNFYQGSIMSNEQKIRIE'
        'NEIINLKNEYNDRKSTLDALSNQKSGYRHELSELASKNDDINREAHQLNEIRKKYTMRKSTIETLR'
        'EKLDQLKREARKDVSQKIKDIDDQIQQLLLKQRHLLSKMASSMKSLKNCQKELISTQILQFEAQNM'
        'DVSMNDVIGFFNEREADLKSQYEDKKKFVKEMRDTPEFQSWMREIRSYDQDTKEKLNKVAEKYEEE'
        'GNFNLSFVQDVLDKLESEIAMVNHDESAVTILDQVTAELRELEHTVPQQSKDLETIKAKLKEDHAV'
        'LEPKLDDIVSKISARFARLFNNVGSAGAVRLEKPKDYAEWKIEIMVKFRDNAPLKKLDSHTQSGGE'
        'RAVSTVLYMIALQEFTSAPFRVVDEINQGMDSRNERIVHKAMVENACAENTSQYFLITPKLLTGLH'
        'YHEKMRIHCVMAGSWIPNPSEDPKMIHFGETSNYSFD'},
    'Q12749': {'db_code':'SMC6_YEAST', 'sequence':
        'MISTTISGKRPIEQVDDELLSLTAQQENEEQQQQRKRRRHQFAPMTQFNSNTLDEDSGFRSSSDVA'
        'TADQDNFLEESPSGYIKKVILRNFMCHEHFELELGSRLNFIVGNNGSGKSAILTAITIGLGAKASE'
        'TNRGSSLKDLIREGCYSAKIILHLDNSKYGAYQQGIFGNEIIVERIIKRDGPASFSLRSENGKEIS'
        'NKKKDIQTVVDYFSVPVSNPMCFLSQDAARSFLTASTSQDKYSHFMKGTLLQEITENLLYASAIHD'
        'SAQENMALHLENLKSLKAEYEDAKKLLRELNQTSDLNERKMLLQAKSLWIDVAHNTDACKNLENEI'
        'SGIQQKVDEVTEKIRNRQEKIERYTSDGTTIEAQIDAKVIYVNEKDSEHQNARELLRDVKSRFEKE'
        'KSNQAEAQSNIDQGRKKVDALNKTIAHLEEELTKEMGGDKDQMRQELEQLEKANEKLREVNNSLVV'
        'SLQDVKNEERDIQHERESELRTISRSIQNKKVELQNIAKGNDTFLMNFDRNMDRLLRTIEQRKNEF'
        'ETPAIGPLGSLVTIRKGFEKWTRSIQRAISSSLNAFVVSNPKDNRLFRDIMRSCGIRSNIPIVTYC'
        'LSQFDYSKGRAHGNYPTIVDALEFSKPEIECLFVDLSRIERIVLIEDKNEARNFLQRNPVNVNMAL'
        'SLRDRRSGFQLSGGYRLDTVTYQDKIRLKVNSSSDNGTQYLKDLIEQETKELQNIRDRYEEKLSEV'
        'RSRLKEIDGRLKSTKNEMRKTNFRMTELKMNVGKVVDTGILNSKINERKNQEQAIASYEAAKEELG'
        'LKIEQIAQEAQPIKEQYDSTKLALVEAQDELQQLKEDINSRQSKIQKYKDDTIYYEDKKKVYLENI'
        'KKIEVNVAALKEGIQRQIQNACAFCSKERIENVDLPDTQEEIKRELDKVSRMIQKAEKSLGLSQEE'
        'VIALFEKCRNKYKEGQKKYMEIDEALNRLHNSLKARDQNYKNAEKGTCFDADMDFRASLKVRKFSG'
        'NLSFIKDTKSLEIYILTTNDEKARNVDTLSGGEKSFSQMALLLATWKPMRSRIIALDEFDVFMDQV'
        'NRKIGTTLIVKKLKDIARTQTIIITPQDIGKIADIDSSGVSIHRMRDPERQNNSNFYN'},
    'P38632': {'db_code':'NSE2_YEAST', 'sequence':
        'MALNDNPIPKSVPLHPKSGKYFHNLHARDLSNIYQQCYKQIDETINQLVDSTSPSTIGIEEQVADI'
        'TSTYKLLSTYESESNSFDEHIKDLKKNFKQSSDACPQIDLSTWDKYRTGELTAPKLSELYLNMPTP'
        'EPATMVNNTDTLKILKVLPYIWNDPTCVIPDLQNPADEDDLQIEGGKIELTCPITCKPYEAPLISR'
        'KCNHVFDRDGIQNYLQGYTTRDCPQAACSQVVSMRDFVRDPIMELRCKIAKMKESQEQDKRSSQAI'
        'DVL'},
    'Q03718': {'db_code':'NSE5_YEAST', 'sequence':
        'MDGALINSVLYVSPRNGAHYFVELTEKHLLAFEMLNSMCLLENYDHVLLFLECQFGKSHNLAVIPF'
        'DIILVLFTLSTLSEYYKEPILRANDPYNTSRETLSRRALKLLQKYLAILKEFDSEQYNLYDLELLR'
        'CQFFLAIDTLTPKKQKWGFDRFRRTKSESGVTYRQNASVDPELDQAKTFKNPYRSYISCLEQRNTI'
        'LGNRLLNLKLNEPGEFINMILWTLSNSLQESTPLFLSSHEIWMPLLEILIDLFSCRQDYFIQHEVA'
        'QNVSKSLFVQRLSESPLAVFFESLNTRNFANRFSEYVFLNCDYKLPSDNYATPVHPVYNGENTIVD'
        'TYIPTIKCSPLYKSQKSLALRRKLIGSCFKLLLRVPDGHRLITPRIVADDVIQGISRTLASFNDIL'
        'QFKKFFMTENLSQESYFIPLLAEGTLSEILKDTQECVVILTLVENLSDGVSFCNEVIGLVKSKCFA'
        'FTEQCSQASYEEAVLNIEKCDVCLLVLLRYLLHLIGTEAILDAKEQLEMLHAIEKNDSGRRQWAKA'
        'LNLGNDPPLLYPIVSQMFGVHDKSVIIE'},
}

if 'JOB_ID' in os.environ:
    ihm.Citation.from_pubmed_id = classmethod(mock_from_pubmed)
    if hasattr(ihm, 'reference'):
        def from_acc(cls, accession):
            return cls(accession=accession, **accession_map[accession])
        ihm.reference.UniProtSequence.from_accession = classmethod(from_acc)
